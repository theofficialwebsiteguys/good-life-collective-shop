<div class="card surface" tabindex="0"
     (keyup.enter)="addToCart($event)"
     (keyup.space)="addToCart($event)">

  <!-- IMAGE STAGE -->
  <div class="stage" [class.loading]="!imageLoaded">
    <img
      class="photo"
      [src]="product.image || placeholderFor(product.category)"
      [alt]="product.title"
      loading="lazy"
      decoding="async"
      (load)="onImgLoad()"
      (error)="onImgError($event)"
    />

    <!-- Corner badges -->
    <div class="corner left">
      <span *ngIf="product?.strainType"
            class="chip strain {{ strainClass(product.strainType) }}">{{ product.strainType }}</span>
    </div>
    <div class="corner right">
      <span *ngIf="product?.weight && product['unit']" class="chip ghost">
        {{ product.weight }} {{ product['unit'] }}
      </span>
    </div>

    <!-- Price badge anchored to bottom-left of image for high salience -->
    <div class="price-badge">
      <span class="chip price">{{ product.price | currency }}</span>
    </div>

    <!-- Add to cart -->
    <button type="button"
            class="cta"
            (click)="addToCart($event)"
            [disabled]="isDisabled"
            [attr.aria-label]="isAdded ? (product.title + ' added to cart') : ('Add ' + product.title + ' to cart')">
      <span class="cta-ico" [class.added]="isAdded"></span>
    </button>

    <!-- Subtle top glow -->
    <div class="halo" aria-hidden="true"></div>
  </div>

  <!-- BODY -->
  <div class="body">
    <p class="brand" [title]="product.brand">{{ product.brand }}</p>
    <h3 class="title" [title]="product.title">{{ product.title }}</h3>

    <!-- Optional meta row (uncomment if you want another tag e.g., THC) -->
    <div class="meta">
      <span class="pill tiny">{{ product.thc }} THC</span>
      <span class="dot"></span>
      <span class="pill tiny">{{ product.cbd }} CBD</span>
    </div>
  </div>
</div>
